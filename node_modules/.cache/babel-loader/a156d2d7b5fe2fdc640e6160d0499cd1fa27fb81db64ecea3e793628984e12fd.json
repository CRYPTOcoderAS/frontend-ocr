{"ast":null,"code":"import React,{useState}from'react';import{Button,Modal}from'react-bootstrap';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MyVerticallyCenteredModal=props=>{const[file,setFile]=useState(null);const[image,setImage]=useState();const[isImageUploaded,setIsImageUploaded]=useState(null);const[error,setError]=useState(null);const handleFileChange=async e=>{const selectedFile=e.target.files[0];setFile(selectedFile);props.setImageLoading(true);const formData=new FormData();formData.append('image',selectedFile);try{const config={headers:{'Content-Type':'multipart/form-data'}};const response=await axios.post(\"https://thai-card.onrender.com/upload\",formData,config);// Log the entire response for debugging\nconsole.log('Response:',response);// Destructure the data and update state\nconst{identification_number,name,last_name,date_of_birth,date_of_issue,date_of_expiry}=response.data;props.setIdNumber(identification_number);props.setName(name);props.setLastName(last_name);props.setDOB(date_of_birth);props.setDOI(date_of_issue);props.setDOE(date_of_expiry);props.setIsImageUploaded(true);console.log(name);console.log(last_name);props.setImageLoading(false);props.setIsImageUploaded(true);}catch(error){// Log the entire error for debugging\nconsole.error('Error uploading image:',error);// Check if the error has a response\nif(error.response){console.error('Response data:',error.response.data);console.error('Response status:',error.response.status);console.error('Response headers:',error.response.headers);}else if(error.request){// The request was made, but no response was received\nconsole.error('No response received:',error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.error('Error setting up the request:',error.message);}}};const handleUpload=()=>{props.setImage(URL.createObjectURL(file));setFile(null);props.onHide();if(!image){setError('Please upload a valid image file.');return;}if(!['image/jpeg','image/png'].includes(image.type)){setError('Supported formats: JPEG, PNG.');return;}if(image.size>2*1024*1024){setError('Maximum file size: 2MB.');return;}setIsImageUploaded(image);setError(null);};return/*#__PURE__*/_jsxs(Modal,{...props,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"Upload Image\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,className:\"mb-3\"})}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:'10px'},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]})})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleUpload,disabled:!file,children:\"Upload\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:props.onHide,children:\"Close\"})]})]});};export default MyVerticallyCenteredModal;","map":{"version":3,"names":["React","useState","Button","Modal","axios","jsx","_jsx","jsxs","_jsxs","MyVerticallyCenteredModal","props","file","setFile","image","setImage","isImageUploaded","setIsImageUploaded","error","setError","handleFileChange","e","selectedFile","target","files","setImageLoading","formData","FormData","append","config","headers","response","post","console","log","identification_number","name","last_name","date_of_birth","date_of_issue","date_of_expiry","data","setIdNumber","setName","setLastName","setDOB","setDOI","setDOE","status","request","message","handleUpload","URL","createObjectURL","onHide","includes","type","size","centered","children","Header","closeButton","Title","id","Body","className","accept","onChange","style","color","marginTop","Footer","onClick","disabled","variant"],"sources":["C:/Users/Dell/Desktop/frontend-ocr/src/components/Modal.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nconst MyVerticallyCenteredModal = (props) => {\r\n  const [file, setFile] = useState(null);\r\n  const [image, setImage] = useState();\r\n  const [isImageUploaded, setIsImageUploaded] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const handleFileChange = async (e) => {\r\n    const selectedFile = e.target.files[0];\r\n    setFile(selectedFile);\r\n    props.setImageLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('image', selectedFile);\r\n\r\n    try {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n        };\r\n        const response = await axios.post(`https://thai-card.onrender.com/upload`, formData, config);\r\n\r\n        // Log the entire response for debugging\r\n        console.log('Response:', response);\r\n\r\n        // Destructure the data and update state\r\n        const { identification_number, name, last_name, date_of_birth, date_of_issue, date_of_expiry } = response.data;\r\n        props.setIdNumber(identification_number);\r\n        props.setName(name);\r\n        props.setLastName(last_name);\r\n        props.setDOB(date_of_birth);\r\n        props.setDOI(date_of_issue);\r\n        props.setDOE(date_of_expiry);\r\n        props.setIsImageUploaded(true);\r\n        console.log(name)\r\n        console.log(last_name)\r\n        props.setImageLoading(false);\r\n        props.setIsImageUploaded(true);\r\n    } catch (error) {\r\n        // Log the entire error for debugging\r\n        console.error('Error uploading image:', error);\r\n\r\n        // Check if the error has a response\r\n        if (error.response) {\r\n            console.error('Response data:', error.response.data);\r\n            console.error('Response status:', error.response.status);\r\n            console.error('Response headers:', error.response.headers);\r\n        } else if (error.request) {\r\n            // The request was made, but no response was received\r\n            console.error('No response received:', error.request);\r\n        } else {\r\n            // Something happened in setting up the request that triggered an Error\r\n            console.error('Error setting up the request:', error.message);\r\n        }\r\n    }\r\n};\r\n\r\n\r\n  const handleUpload = () => {\r\n    props.setImage(URL.createObjectURL(file));\r\n    setFile(null);\r\n    props.onHide();\r\n\r\n    if (!image) {\r\n      setError('Please upload a valid image file.');\r\n      return;\r\n    }\r\n  \r\n    if (!['image/jpeg', 'image/png'].includes(image.type)) {\r\n      setError('Supported formats: JPEG, PNG.');\r\n      return;\r\n    }\r\n  \r\n    if (image.size > 2 * 1024 * 1024) {\r\n      setError('Maximum file size: 2MB.');\r\n      return;\r\n    }\r\n    setIsImageUploaded(image);\r\n    setError(null);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Upload Image\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className=\"text-center\">\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleFileChange}\r\n            className=\"mb-3\"\r\n          />\r\n        </div>\r\n        {error && (\r\n        <div style={{ color: 'red', marginTop: '10px' }}>\r\n          <p>Error: {error}</p>\r\n        </div>\r\n      )}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={handleUpload} disabled={!file}>\r\n          Upload\r\n        </Button>\r\n        <Button variant=\"secondary\" onClick={props.onHide}>\r\n          Close\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default MyVerticallyCenteredModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}