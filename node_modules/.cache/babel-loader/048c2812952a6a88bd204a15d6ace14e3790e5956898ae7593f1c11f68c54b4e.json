{"ast":null,"code":"import React,{useState}from'react';import{Button,Modal}from'react-bootstrap';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MyVerticallyCenteredModal=props=>{const[file,setFile]=useState(null);const handleFileChange=async e=>{const selectedFile=e.target.files[0];setFile(selectedFile);props.setImageLoading(true);const formData=new FormData();formData.append('image',selectedFile);try{const config={headers:{'Content-Type':'multipart/form-data'}};const response=await axios.post(\"https://thai-card.onrender.com/upload\",formData,config);// Log the entire response for debugging\nconsole.log('Response:',response);// Destructure the data and update state\nconst{identification_number,name,last_name,date_of_birth,date_of_issue,date_of_expiry}=response.data;props.setIdNumber(identification_number);props.setName(name);props.setLastName(last_name);props.setDOB(date_of_birth);props.setDOI(date_of_issue);props.setDOE(date_of_expiry);props.setIsImageUploaded(true);console.log(name);console.log(last_name);props.setImageLoading(false);props.setIsImageUploaded(true);}catch(error){// Log the entire error for debugging\nconsole.error('Error uploading image:',error);// Check if the error has a response\nif(error.response){console.error('Response data:',error.response.data);console.error('Response status:',error.response.status);console.error('Response headers:',error.response.headers);}else if(error.request){// The request was made, but no response was received\nconsole.error('No response received:',error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.error('Error setting up the request:',error.message);}}};const handleUpload=()=>{props.setImage(URL.createObjectURL(file));setFile(null);props.onHide();};return/*#__PURE__*/_jsxs(Modal,{...props,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"Upload Image\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,className:\"mb-3\"})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleUpload,disabled:!file,children:\"Upload\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:props.onHide,children:\"Close\"})]})]});};export default MyVerticallyCenteredModal;","map":{"version":3,"names":["React","useState","Button","Modal","axios","jsx","_jsx","jsxs","_jsxs","MyVerticallyCenteredModal","props","file","setFile","handleFileChange","e","selectedFile","target","files","setImageLoading","formData","FormData","append","config","headers","response","post","console","log","identification_number","name","last_name","date_of_birth","date_of_issue","date_of_expiry","data","setIdNumber","setName","setLastName","setDOB","setDOI","setDOE","setIsImageUploaded","error","status","request","message","handleUpload","setImage","URL","createObjectURL","onHide","size","centered","children","Header","closeButton","Title","id","Body","className","type","accept","onChange","Footer","onClick","disabled","variant"],"sources":["C:/Users/Dell/Desktop/frontend/src/components/Modal.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport axios from 'axios';\n\nconst MyVerticallyCenteredModal = (props) => {\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = async (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n    props.setImageLoading(true);\n    const formData = new FormData();\n    formData.append('image', selectedFile);\n\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        };\n\n        const response = await axios.post(`https://thai-card.onrender.com/upload`, formData, config);\n\n        // Log the entire response for debugging\n        console.log('Response:', response);\n\n        // Destructure the data and update state\n        const { identification_number, name, last_name, date_of_birth, date_of_issue, date_of_expiry } = response.data;\n        props.setIdNumber(identification_number);\n        props.setName(name);\n        props.setLastName(last_name);\n        props.setDOB(date_of_birth);\n        props.setDOI(date_of_issue);\n        props.setDOE(date_of_expiry);\n        props.setIsImageUploaded(true);\n        console.log(name)\n        console.log(last_name)\n        props.setImageLoading(false);\n        props.setIsImageUploaded(true);\n    } catch (error) {\n        // Log the entire error for debugging\n        console.error('Error uploading image:', error);\n\n        // Check if the error has a response\n        if (error.response) {\n            console.error('Response data:', error.response.data);\n            console.error('Response status:', error.response.status);\n            console.error('Response headers:', error.response.headers);\n        } else if (error.request) {\n            // The request was made, but no response was received\n            console.error('No response received:', error.request);\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            console.error('Error setting up the request:', error.message);\n        }\n    }\n};\n\n\n  const handleUpload = () => {\n    props.setImage(URL.createObjectURL(file));\n    setFile(null);\n    props.onHide();\n  };\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Upload Image\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div className=\"text-center\">\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleFileChange}\n            className=\"mb-3\"\n          />\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={handleUpload} disabled={!file}>\n          Upload\n        </Button>\n        <Button variant=\"secondary\" onClick={props.onHide}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default MyVerticallyCenteredModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}